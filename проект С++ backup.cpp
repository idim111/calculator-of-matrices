#include <iostream>
using namespace std;
int main() {



	//перменные ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



	setlocale(LC_ALL, "russian");
	int sum1 = 0;
	int sum2 = 0;
	int A;
	int B;
	int B1;
	int G = 0;
	int F;
	int counter = 0;
	int counter2 = 0;



	//ввод размера матриц (массивов) --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



	cout << "matrix 1 size" << "\n";
	cin >> A >> B;
	int B2;
	int** mas = new int* [A];
	for (int i = 0; i < A; i++) {
		mas[i] = new int[B];
	}
	int C;
	int D;
	cout << "matrix 2 size" << "\n";
	cin >> C >> D;
	int** mas2 = new int* [C];
	for (int i = 0; i < C; i++) {
		mas2[i] = new int[D];
	}
	int** mas4 = new int* [C];
	int** mas3 = new int* [A];
	for (int i = 0; i < C; i++) {
		mas3[i] = new int[D];
	}
	for (int i = 0; i < A; i++) {
		mas4[i] = new int[D];
	}



	//ввод1 ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



	cout << "matrix 1 input" << "\n";
	for (int i = 0; i < A; i++) {
		for (int j = 0; j < B; j++) {
			cin >> B1;
			mas[i][j] = B1;
		}
	}



	//ввод2 ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



	cout << "matrix 2 input" << "\n";

	for (int i = 0; i < C; i++) {
		for (int j = 0; j < D; j++) {
			cin >> B2;
			mas2[i][j] = B2;
		}
	}



	//проверка действия----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



	cout << "1-multiplication \n2-addition \n3-substraction" << "\n";
	while (G != 1) {
		G = 0;

		cin >> F;
		if (F != 1 and F != 2 and F != 3 and F != 4) {
			cout << "incorrect input, follow given instructions above\n";
		}
		else {
			G = 1;
		}
	}



	//умножение ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



	if (F == 1) {
		if (B != C) {
			cout << "the amount of rows in the first matrix doesn't match the amount of lines in the second matrix, therefore those matrixes CANNOT be multiplied";
			return 0;
		}
		for (int i = 0; i < A; i++) {
			for (int j = 0; j < B; j++) {
				counter2++;
				for (int L = 0; L < D; L++) {
					mas3[j][L] = mas[i][j] * mas2[j][L];
					counter++;
				}

			}
			for (int W = 0; W < A; W++) {
				for (int U = 0; U < C; U++) {
					sum1 = sum1 + mas3[U][W];
				}
				mas4[i][W] = sum1;
				sum1 = 0;
			}
		}
		for (int i = 0; i < A; i++) {
			cout << "\n";
			cout << "( ";
			for (int j = 0; j < D; j++) {
				cout << mas4[i][j] << " ";
			}
			cout << ')';
		}
	}



	//сумма --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



	if (F == 2) {
		if (A != C or B != D) {
			cout << "both of the matrixes should be the same size for sum to work";
			return 0;
		}
		for (int i = 0; i < A; i++) {
			for (int j = 0; j < B; j++) {
				mas4[i][j] = mas[i][j] + mas2[i][j];
			}
		}
		for (int i = 0; i < A; i++) {
			cout << "\n";
			cout << "( ";
			for (int j = 0; j < B; j++) {
				cout << mas4[i][j] << " ";
			}
			cout << ')';
		}
	}



	//разность -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------



	if (F == 3) {
		if (A != C or B != D) {
			cout << "both of the matrixes should be the same size for substruction to work";
			return 0;
		}
		for (int i = 0; i < A; i++) {
			for (int j = 0; j < B; j++) {
				mas4[i][j] = mas[i][j] - mas2[i][j];
			}
		}
		for (int i = 0; i < A; i++) {
			cout << "\n";
			cout << "( ";
			for (int j = 0; j < B; j++) {
				cout << mas4[i][j] << " ";
			}
			cout << ')';
		}
	}
}